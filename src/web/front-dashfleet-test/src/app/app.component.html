<main class="min-h-screen grid place-content-center w-full max-w-sm mx-auto">
  <section [hidden]="submitted">
    <form
      #orderForm="ngForm"
      (ngSubmit)="onSubmit()"
      class="grid justify-center gap-4"
    >
      <div class="grid gap-1">
        <label for="orderId" class="text-center text-white">
          Código pedido
        </label>
        <input
          class="py-1 px-2 rounded-sm outline-none border-none"
          type="number"
          id="orderId"
          name="orderId"
          #orderId="ngModel"
          [(ngModel)]="orderQuery.orderId"
          required
        />
        <div
          [hidden]="orderId.valid || orderId.pristine"
          class="text-red-600 text-center text-sm"
        >
          El código es requerido
        </div>
      </div>
      <div class="grid gap-1">
        <label for="documentType" class="text-center text-white"
          >Tipo documento</label
        >
        <select
          class="py-1 px-2 rounded-sm outline-none border-none"
          name="documentType"
          id="documentType"
          #documentType="ngModel"
          [(ngModel)]="orderQuery.documentType"
          required
        >
          <option
            *ngFor="let documentType of documentTypes"
            [value]="documentType.value"
          >
            {{ documentType.name }}
          </option>
        </select>
        <div
          [hidden]="documentType.valid || documentType.pristine"
          class="text-red-600 text-center text-sm"
        >
          El tipo de documento es requerido
        </div>
      </div>
      <div class="grid gap-1">
        <label for="documentNumber" class="text-center text-white">
          Número documento
        </label>
        <input
          class="py-1 px-2 rounded-sm outline-none border-none"
          type="number"
          id="documentNumber"
          name="documentNumber"
          #documentNumber="ngModel"
          [(ngModel)]="orderQuery.documentNumber"
          required
        />
        <div
          [hidden]="documentNumber.valid || documentNumber.pristine"
          class="text-red-600 text-center text-sm"
        >
          El tipo de documento es requerido
        </div>
      </div>
      <button
        type="submit"
        class="bg-yellow-400 py-1 rounded font-bold disabled:opacity-50 disabled:cursor-not-allowed mt-6"
        [disabled]="orderForm.form.invalid"
      >
        Consultar
      </button>
    </form>
  </section>

  <section *ngIf="submitted" class="grid justify-center gap-2">
    <div class="text-white">
      <span class="font-bold">Código pedido: </span>
      <span>{{ orders[0].order_id }}</span>
    </div>
    <div class="text-white">
      <span class="font-bold">Estado: </span>
      <span>{{ orders[0].state }}</span>
    </div>
    <div class="text-white">
      <span class="font-bold">Dirección de entrega: </span>
      <span>{{ orders[0].direction }}</span>
    </div>
    <div class="text-white">
      <span class="font-bold">Fecha de entrega: </span>
      <span>{{ orders[0].delivery_date }}</span>
    </div>
    <div class="text-white">
      <span class="font-bold">Nombre del cliente: </span>
      <span>{{ orders[0].client_name }}</span>
    </div>
    <table class="mt-2 text-white">
      <thead>
        <tr>
          <th class="border px-1">Producto</th>
          <th class="border px-1">Referencia</th>
          <th class="border px-1">Cantidad</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of orders">
          <td class="border px-1">{{ order.product_name }}</td>
          <td class="border px-1">{{ order.ref }}</td>
          <td class="border px-1">{{ order.quantity }}</td>
        </tr>
      </tbody>
    </table>
    <button
      class="bg-red-600 py-1 rounded font-bold mt-6"
      (click)="resetForm()"
    >
      Cerrar
    </button>
    <button
      class="bg-yellow-400 py-1 rounded font-bold mt-2"
      (click)="resetForm()"
    >
      Nueva consulta
    </button>
  </section>
</main>
